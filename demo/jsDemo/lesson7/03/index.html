<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>移动效果（按轨迹移动）</title>
    <style>
      img {
          position: absolute;
      }
    </style>
  </head>
  <body>
    <input type="button" value="根据鼠标点击位置移动"/>
    <input type="button" value="根据标鼠标轨迹移动"/>
    <p>请点击按钮激活功能！</p><img src="img/1.gif"/>
    <script>
      window.onload = function() {
          var g = {
              btns : document.getElementsByTagName('input'),
              instruction: document.getElementsByTagName('p')[0],
              clickActive: false,
              html : document.documentElement,
              pos: {
                  x : 0,
                  y : 0
              },
              npc : document.getElementsByTagName('img')[0]
          }

          g.html.onclick = function(event){
              if(g.clickActive) {
                  var fly = setInterval((function(event){
                      return function(){
                          g.pos.x =+ 30;
                          g.pos.y =+ 30;
                          g.npc.style.left = g.pos.x + 'px';
                          g.npc.style.top = g.pos.y + 'px';
                          g.npc.src = 'img/2.gif';
                          if(g.pos.x >= event.clientX || g.pos.y >= event.clientY){
                              clearInterval(fly);
                              g.npc.src = 'img/1.gif';
                          }
                      })(event),100)
                  }
              }
          }



          g.btns[0].onclick = function(event){
              if(!g.clickActive) {
                  this.value = this.value + '(已激活)';
                  g.clickActive = true;
                  g.btns[1].value = '根据标鼠标轨迹移动';
              }
              g.instruction.innerHTML = '鼠标点击页面， 人物将移动至鼠标位置！';
              event.stopPropagation();

          }

          g.btns[1].onclick = function() {
              if(g.clickActive){
                  this.value = this.value + '(已激活)';
                  g.clickActive = false;
                  g.btns[0].value = '根据鼠标点击位置移动';
              }
              g.instruction.innerHTML = '按住鼠标左键，在页面划动，人物将按照鼠标轨迹移动';
              event.stopPropagation();
          }
      }
    </script>
  </body>
</html>
