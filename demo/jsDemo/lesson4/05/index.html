<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>arguments应用</title>
    <style>
      .box {
          width: 400px;
          height: 200px;
          background-color: rgb(254,244,235);
          margin: 0 auto;
          border: 1px solid orange;
      }
      input {
          widht: 100px;
          color: snow;
          background: orange;
          border: none;
          margin: 20px 10px;
          cursor: pointer;
      }
    </style>
  </head>
  <body> 
    <div class="box">
      <input type="button" value="Get Style"/>
      <input type="button" value="Set Style"/>
      <input type="button" value="Default Style"/>
    </div>
    <script>
      window.onload = function() {
          var box = document.getElementsByTagName('div')[0];
          var btns = document.querySelectorAll('input');
          
          btns[0].onclick = function(){
              alert(getStyle(box));
          }
          
          btns[1].onclick = function(){
              var boxCss = 'height: 100px;border-color:blue;background: rgb(109, 199, 219)';
              var btnCss = 'background: blue';
              
              setStyle(box,boxCss);
              setStyle(btns,btnCss)
          }
          
          btns[2].onclick = function() {
              box.style = '';
              for(var i = 0; i < btns.length; i++) {
                  btns[i].style = "";
              }
          }
          
          function getStyle(ele) {
              var cssName = ele.className;
          
              var sheet = document.styleSheets[0];
              var rules = sheet.cssRules || sheet.rules;
              // 兼容ie
              
              var totalRules = '';
              
              for (var i = 0; i < rules.length; i++) 
              {
                  if(rules[i].selectorText == '.' + cssName || rules[i].selectorText == ele.nodeName.toLowerCase()) 
                  {
                      // 获取cssrules中对应classname的那条规则
                      totalRules += rules[i].cssText;
                  }
              }
              
              if(ele.style.cssText !== '' ) {
                  totalRules += ele.style.cssText
              }
              return totalRules;
              //- todo: 没有考虑多个classname的情况
          }
          
          function setStyle(ele,css) 
          {
              if(ele instanceof Element) {
                  ele.style.cssText = css;
                  
              }else if (ele instanceof NodeList) {
                  for (var i = 0; i < ele.length; i++) {
                      ele[i].style.cssText = css;
                  }
              }
          }
          
          
          
      }
    </script>
  </body>
</html>